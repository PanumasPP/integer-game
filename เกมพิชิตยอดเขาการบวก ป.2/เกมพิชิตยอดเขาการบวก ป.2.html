<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ä‡πà‡∏ß‡∏¢‡∏™‡∏≠‡∏ô: ‡∏û‡∏¥‡∏ä‡∏¥‡∏ï‡∏¢‡∏≠‡∏î‡πÄ‡∏Ç‡∏≤‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏Å ‡∏õ.2 (CAI Edition)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="heartbeatOverlay"></div>

    <audio id="backgroundMusic" loop>
        <source src="sounds/background_music.mp3" type="audio/mpeg">
    </audio>

    <div id="mainMenuModal" class="cai-modal" style="display: flex;">
        <div class="cai-modal-content">
            <h1 class="text-4xl font-bold text-purple-700 mb-4">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà</h1>
            <h2 class="text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 mb-8">
                üèîÔ∏è ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ä‡πà‡∏ß‡∏¢‡∏™‡∏≠‡∏ô: ‡∏û‡∏¥‡∏ä‡∏¥‡∏ï‡∏¢‡∏≠‡∏î‡πÄ‡∏Ç‡∏≤‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏Å ‡∏õ.2 üé≤
            </h2>
            <button id="mainMenuSinglePlayerBtn" class="main-menu-button bg-teal-500 hover:bg-teal-600 text-white"><i class="fas fa-user mr-3"></i>‡πÇ‡∏´‡∏°‡∏î‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢ (1 ‡∏Ñ‡∏ô)</button>
            <button id="mainMenuStartGameBtn" class="main-menu-button start-game-btn"><i class="fas fa-users mr-3"></i>‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° (‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏ô)</button>
            <button id="mainMenuLearningHubBtn" class="main-menu-button learning-hub-btn"><i class="fas fa-book-open mr-3"></i>‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ</button>
            <button id="mainMenuSettingsBtn" class="main-menu-button settings-btn"><i class="fas fa-cog mr-3"></i>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</button>
            <p class="creator-credit text-lg mt-10">‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏ó‡∏≥: ‡∏Ñ‡∏£‡∏π‡∏†‡∏≤‡∏ì‡∏∏‡∏°‡∏≤‡∏® ‡πÅ‡∏õ‡πâ‡∏ô‡πÄ‡∏î‡∏ä<br>‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏õ‡πà‡∏≤‡∏≠‡∏∏‡∏õ‡∏ñ‡∏±‡∏°‡∏†‡πå</p>
        </div>
    </div>

    <div id="learningHubModal" class="cai-modal">
        <div class="cai-modal-content" style="max-width: 800px;">
            <div id="learningHubTopicSelection">
                <h2 class="text-3xl font-bold text-center mb-6 text-purple-700">‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠</h2>
                <div class="learning-topics-grid">
                    <button id="learnAdditionBtn" data-category="addition" class="learning-topic-btn bg-green-100 text-green-800 border-green-300 hover:bg-green-200">
                        <i class="fas fa-plus-circle text-3xl mb-2"></i>
                        ‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡∏ö
                    </button>
                    </div>
                <div class="text-center mt-6">
                    <button id="closeLearningHubBtn" class="modal-button modal-close-button"><i class="fas fa-times mr-2"></i>‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å</button>
                </div>
            </div>
            
            <div id="learningContentView" class="hidden">
                <h2 id="learningContentTitle" class="text-3xl font-bold text-center mb-4 text-purple-700"></h2>
                <div id="learningContentBody" class="learning-content-body p-4 bg-gray-50 rounded-lg shadow-inner mb-6">
                    </div>
                <div class="flex justify-between items-center mt-6">
                    <button id="backToTopicSelectionBtn" class="modal-button modal-close-button"><i class="fas fa-arrow-left mr-2"></i>‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠</button>
                    <button id="goToQuizBtn" class="modal-button modal-submit-button">‡πÑ‡∏õ‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö<i class="fas fa-pencil-alt ml-2"></i></button>
                </div>
            </div>

            <div id="learningQuizContainer" class="hidden">
                <h2 id="quizTitle" class="text-3xl font-bold text-center mb-4 text-purple-700">‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö</h2>
                <p id="quizQuestionNumber" class="text-center text-lg text-gray-600 mb-4 font-semibold"></p>
                <div class="text-2xl p-6 bg-gray-50 rounded-lg shadow-inner mb-6 min-h-[100px] flex items-center justify-center" id="quizQuestionText"></div>
                <div id="quizChoices" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
                <div id="quizFeedback" class="mt-6 text-center font-bold text-2xl"></div>
                <div class="text-center mt-4">
                    <button id="nextQuizQuestionBtn" class="modal-button modal-submit-button hidden">‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡πÑ‡∏õ <i class="fas fa-arrow-right ml-2"></i></button>
                </div>
            </div>

            <div id="learningSummaryContainer" class="hidden">
                 <h2 class="text-3xl font-bold text-center mb-6 text-purple-700">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö</h2>
                 <div id="finalSummaryMessage" class="text-2xl text-center font-bold text-green-600 mb-6 hidden">
                    üéâ ‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°! ‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÅ‡∏•‡πâ‡∏ß!
                 </div>
                 <div class="summary-display">
                    <p>‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å: <span id="summaryCorrect" class="font-bold text-green-600 text-3xl">0</span> ‡∏Ç‡πâ‡∏≠</p>
                    <p>‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î: <span id="summaryIncorrect" class="font-bold text-red-600 text-3xl">0</span> ‡∏Ç‡πâ‡∏≠</p>
                    <p>‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥: <span id="summaryPercentage" class="font-bold text-blue-600 text-3xl">0%</span></p>
                 </div>
                 <div class="text-center mt-8">
                     <button id="backToHubBtn" class="modal-button modal-close-button"><i class="fas fa-book-open mr-2"></i>‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠</button>
                 </div>
            </div>

        </div>
    </div>


    <div id="settingsModal" class="cai-modal">
        <div class="cai-modal-content" style="max-width: 400px;">
             <h2 class="text-3xl font-bold text-center mb-6 text-purple-700">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</h2>
             <div class="flex justify-between items-center text-xl">
                <label for="soundToggle">‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö:</label>
                <label class="relative inline-flex items-center cursor-pointer">
                  <input type="checkbox" id="soundToggle" class="sr-only peer" checked>
                  <div class="w-14 h-8 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-1 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-blue-600"></div>
                </label>
             </div>
              <div class="text-center mt-8">
                 <button id="closeSettingsBtn" class="modal-button modal-close-button"><i class="fas fa-times mr-2"></i>‡∏õ‡∏¥‡∏î</button>
            </div>
        </div>
    </div>

    <div id="reportModal" class="cai-modal">
        <div class="cai-modal-content">
            <h2 class="text-3xl font-bold text-center mb-6 text-purple-700">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ</h2>
            <div id="reportContent" class="text-left overflow-x-auto"></div>
            <div class="text-center mt-8">
                 <button id="playAgainFromReportBtn" class="main-menu-button start-game-btn" style="max-width:250px;"><i class="fas fa-redo mr-2"></i>‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
            </div>
        </div>
    </div>

    <div id="explanationModal" class="modal">
        <div class="modal-content">
             <div id="explanationHeader" class="flex justify-between items-center mb-4">
                <h3 id="explanationTitle" class="text-2xl font-bold text-red-600">‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î!</h3>
            </div>
            <div id="explanationContent" class="mb-6 text-lg text-gray-700">
                </div>
            <div class="flex justify-end">
                <button id="closeExplanationBtn" class="modal-button modal-submit-button bg-blue-500 hover:bg-blue-600"><i class="fas fa-times mr-2"></i>‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö</button>
            </div>
        </div>
    </div>
    <div id="gameSetupScreen" class="game-setup-screen hidden"> <h1 class="text-3xl font-bold text-center mb-6 text-purple-700">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏Å‡∏°‡∏û‡∏¥‡∏ä‡∏¥‡∏ï‡∏¢‡∏≠‡∏î‡πÄ‡∏Ç‡∏≤</h1>
        <div class="mb-4">
            <label for="numPlayersSelect" class="block text-lg font-medium text-gray-700">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô:</label>
            <select id="numPlayersSelect" class="setup-input mt-1 block w-full">
                <option value="2" selected>2 ‡∏Ñ‡∏ô</option>
                <option value="3">3 ‡∏Ñ‡∏ô</option>
                <option value="4">4 ‡∏Ñ‡∏ô</option>
                <option value="5">5 ‡∏Ñ‡∏ô</option>
                <option value="6">6 ‡∏Ñ‡∏ô</option>
                <option value="7">7 ‡∏Ñ‡∏ô</option>
                <option value="8">8 ‡∏Ñ‡∏ô</option>
                <option value="9">9 ‡∏Ñ‡∏ô</option>
                <option value="10">10 ‡∏Ñ‡∏ô</option>
            </select>
        </div>
        <div id="playerConfigArea" class="mb-6 space-y-4"></div>
        <p class="creator-credit">‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏ó‡∏≥: ‡∏Ñ‡∏£‡∏π‡∏†‡∏≤‡∏ì‡∏∏‡∏°‡∏≤‡∏® ‡πÅ‡∏õ‡πâ‡∏ô‡πÄ‡∏î‡∏ä ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏õ‡πà‡∏≤‡∏≠‡∏∏‡∏õ‡∏ñ‡∏±‡∏°‡∏†‡πå</p>
        <button id="startGameBtn" class="main-action-button w-full py-3 mt-4"><i class="fas fa-play mr-2"></i>‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°!</button>
    </div>

    <div id="boardContainer" class="board-container hidden">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600">
                üèîÔ∏è ‡∏û‡∏¥‡∏ä‡∏¥‡∏ï‡∏¢‡∏≠‡∏î‡πÄ‡∏Ç‡∏≤‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏Å ‡∏õ.2 üé≤
            </h1>
        </header>

        <div class="flex flex-col lg:flex-row lg:space-x-6 items-start">
            <div id="playersInfoPanelContainer" class="w-full lg:w-1/5 control-panel-item mb-6 lg:mb-0 order-2 lg:order-1">
                <h2 class="text-2xl font-semibold mb-3 text-gray-800">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</h2>
                <div id="playersInfoPanel" class="space-y-2"></div>
                <p id="roundDisplay" class="mt-4 text-lg font-bold text-gray-600">‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà: <span id="currentRoundCounter">1</span></p>
                <p class="mt-2 text-xl font-bold text-indigo-700">‡∏ï‡∏≤‡∏Ç‡∏≠‡∏á: <span id="currentPlayerTurn"></span></p>
            </div>

            <div id="gameBoardOuterContainer" class="w-full lg:flex-grow order-1 lg:order-2 flex justify-center mb-6 lg:mb-0">
                 <div id="gameBoard" class="game-board-grid p-4 bg-blue-50 rounded-xl"></div>
            </div>

            <div id="rightControlPanel" class="w-full lg:w-1/s space-y-6 order-3">
                <div class="control-panel-item dice-area">
                    <h2 class="text-2xl font-semibold mb-3 text-gray-800">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏≠‡∏¢‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤</h2>
                    <div id="diceRollDisplay" class="text-center space-y-1">
                        <p><span class="dice-label">‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á:</span> <span id="movementDieValue" class="dice-value">-</span></p>
                        </div>
                </div>
                <div class="control-panel-item flex flex-col justify-center items-center">
                     <button id="rollDiceButton" class="main-action-button w-full">
                        <i class="fas fa-dice-d6 mr-2"></i> ‡∏ó‡∏≠‡∏¢‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤!
                    </button>
                </div>
            </div>
        </div>
        <div id="messageArea" class="mt-6 p-5 bg-white text-gray-700 rounded-xl shadow-lg text-center text-lg min-h-[60px]"></div>
    </div>

    <div id="centralMessageOverlay" class="central-message-overlay">
        <div id="centralMessageContent" class="central-message-content"></div>
    </div>

    <div id="diceAnimationOverlay" class="dice-animation-overlay">
        <div class="dice-animation-content">
            <p id="diceAnimationText" class="text-2xl mb-4 text-white font-bold text-shadow-lg">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≠‡∏¢‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤...</p>
            <div class="scene">
                <div class="cube" id="diceCube">
                    <div class="cube-face face-1">1</div>
                    <div class="cube-face face-2">2</div>
                    <div class="cube-face face-3">3</div>
                    <div class="cube-face face-4">4</div>
                    <div class="cube-face face-5">5</div>
                    <div class="cube-face face-6">6</div>
                </div>
            </div>
        </div>
    </div>

    <div id="cardSelectionModal" class="card-selection-modal">
        <div class="card-selection-content">
            <h2 id="cardSelectionTitle" class="text-3xl font-bold text-purple-600 mb-6">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡πå‡∏î 1 ‡πÉ‡∏ö!</h2>
            <div id="cardSelectionGrid" class="card-selection-grid"></div>
        </div>
    </div>

    <div id="questionModal" class="modal">
        <div class="modal-content">
             <div id="modalHeader" class="flex justify-between items-center mb-2">
                <h3 id="modalTitle" class="text-2xl font-bold text-gray-800">‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</h3>
                <div id="questionTimerDisplay" class="text-xl font-bold text-orange-500"></div>
            </div>
            <p id="modalQuestion" class="mb-6 text-lg text-gray-700"></p>
            <input type="text" id="modalAnswerInput" class="border border-gray-300 p-3 w-full rounded-lg mb-4 text-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="‡πÉ‡∏™‡πà‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
            <div id="modalFeedback" class="mb-4 text-md font-semibold"></div>
            <div class="flex justify-end space-x-4">
                <button id="modalSubmitButton" class="modal-button modal-submit-button"><i class="fas fa-check mr-2"></i>‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
                <button id="modalCloseButton" class="modal-button modal-close-button"><i class="fas fa-times mr-2"></i>‡∏õ‡∏¥‡∏î</button>
            </div>
        </div>
    </div>

    <div id="emojiPickerModal" class="emoji-picker-modal">
        <div class="emoji-picker-content">
            <h3 class="text-xl font-bold text-center mb-4 text-gray-700">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Emoji</h3>
            <div id="emojiGrid" class="emoji-grid"></div>
            <button id="closeEmojiPickerBtn" class="mt-4 w-full bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg">‡∏õ‡∏¥‡∏î</button>
        </div>
    </div>

    <div id="victoryOverlay" class="victory-overlay hidden">
        <div id="fireworksContainer" class="absolute inset-0 overflow-hidden"></div>
        <div id="winnerNameDisplay" class="text-white text-3xl md:text-4xl lg:text-5xl font-bold p-6 md:p-8 bg-purple-700 bg-opacity-80 rounded-xl shadow-2xl text-center leading-tight">
            </div>
        <button id="reportBtn" class="mt-8 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg text-lg shadow-md transition-transform transform hover:scale-105"><i class="fas fa-chart-bar mr-2"></i> ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏•</button>
        <button id="playAgainBtn" class="mt-8 bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-6 rounded-lg text-lg shadow-md transition-transform transform hover:scale-105">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á?</button>
    </div>

    <div id="prankModal" class="prank-modal">
        <div class="prank-modal-content">
            <h3 id="prankTitle" class="text-2xl font-bold mb-6 text-center text-purple-600"></h3>
            <div id="prankOptionsContainer" class="mb-4">
                </div>
            <div id="prankButtonsContainer" class="flex justify-center space-x-4">
                </div>
        </div>
    </div>

    <script src="questions.js"></script>
    <script src="scripts.js"></script>
</body>
</html>