/* ADDED FOR LEARNING HUB V2 */
.learning-content-body {
    max-height: 40vh;
    overflow-y: auto;
    text-align: left;
    font-size: 1.1rem;
    line-height: 1.7;
}

.learning-content-body h3 {
    font-size: 1.5rem;
    color: #4f46e5;
    margin-bottom: 0.75rem;
    margin-top: 1rem;
}

.learning-content-body p {
    margin-bottom: 0.5rem;
}

.learning-content-body .explanation-box {
    margin-top: 1rem;
    padding: 0.75rem;
    background-color: #f3f4f6;
    border-left: 4px solid #4f46e5;
    border-radius: 4px;
}

/* PREVIOUSLY ADDED CSS FOR LEARNING HUB */
.learning-topics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
    margin-top: 2rem;
}

.learning-topic-btn {
    padding: 1.5rem;
    border-radius: 1rem;
    font-size: 1.25rem;
    font-weight: bold;
    border: 2px solid;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 6px rgba(0,0,0,0.05);
}

.learning-topic-btn:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 15px rgba(0,0,0,0.1);
}

.learning-topic-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    background-color: #f3f4f6 !important;
    border-color: #d1d5db !important;
    color: #6b7280 !important;
    transform: none;
    box-shadow: none;
}

.learning-topic-btn:disabled::after {
    content: '✔️ ทดสอบแล้ว';
    font-size: 1rem;
    font-weight: normal;
    color: #16a34a;
    margin-top: 0.5rem;
}


.quiz-choice-btn {
    width: 100%;
    padding: 1rem;
    font-size: 1.2rem;
    font-weight: 500;
    border: 2px solid #d1d5db;
    border-radius: 0.75rem;
    background-color: #fff;
    cursor: pointer;
    transition: all 0.2s;
}

.quiz-choice-btn:hover:not(:disabled) {
    background-color: #e0f2fe;
    border-color: #3b82f6;
    transform: scale(1.03);
}

.quiz-choice-btn.correct {
    background-color: #dcfce7;
    border-color: #22c55e;
    color: #15803d;
    font-weight: bold;
}

.quiz-choice-btn.incorrect {
    background-color: #fee2e2;
    border-color: #ef4444;
    color: #b91c1c;
    font-weight: bold;
}

.quiz-choice-btn:disabled {
    cursor: not-allowed;
}

.summary-display {
    background-color: #f9fafb;
    border-radius: 1rem;
    padding: 2rem;
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 1rem;
    text-align: center;
    box-shadow: inset 0 2px 4px 0 rgba(0,0,0,0.05);
}

.summary-display p {
    font-size: 1.5rem;
    color: #4b5563;
}

/* Original CSS remains unchanged below... */
body {
    font-family: 'Kanit', sans-serif;
    color: #374151;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    min-height: 100vh;
    padding: 1rem;
    overflow-y: auto;
    position: relative;
}

body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('BG.png');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    opacity: 0.4;
    z-index: -1;
}

.cai-modal {
    display: none;
    position: fixed;
    z-index: 150;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.75);
    justify-content: center;
    align-items: center;
}

.cai-modal-content {
    background-color: #fff;
    padding: 2.5rem;
    border-radius: 24px;
    box-shadow: 0 15px 40px rgba(0,0,0,0.2);
    text-align: center;
    width: 90%;
    max-width: 650px;
    animation: modalAppear 0.5s ease-out;
}

#learningHubModal .cai-modal-content {
    max-width: 800px;
    text-align: left;
}

#reportModal .cai-modal-content {
    max-width: 900px;
    text-align: center;
}

/* IMPORTANT FIX: Higher z-index for explanation modal to appear above other modals */
#explanationModal {
    z-index: 200;
}

#explanationModal .modal-content {
    max-width: 580px;
    padding:35px;
}


.learning-section {
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid #e5e7eb;
}
.learning-section h3 {
    font-size: 1.5rem;
    color: #4f46e5;
    margin-bottom: 0.75rem;
}
.learning-section p {
    font-size: 1.1rem;
    line-height: 1.6;
}
.explanation-box {
    margin-top: 1rem;
    padding: 0.75rem;
    background-color: #f3f4f6;
    border-left: 4px solid #4f46e5;
    border-radius: 4px;
}
.main-menu-button {
    display: block;
    width: 100%;
    max-width: 350px; /* MODIFIED: Wider for longer text */
    margin: 1rem auto;
    padding: 1rem;
    font-size: 1.5rem;
    font-weight: bold;
    border-radius: 12px;
    transition: all 0.3s ease;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}
.start-game-btn { background-color: #22c55e; color: white; }
.start-game-btn:hover { background-color: #16a34a; transform: translateY(-3px); }
.learning-hub-btn { background-color: #3b82f6; color: white; }
.learning-hub-btn:hover { background-color: #2563eb; transform: translateY(-3px); }
.settings-btn { background-color: #64748b; color: white; }
.settings-btn:hover { background-color: #475569; transform: translateY(-3px); }

#heartbeatOverlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(255, 0, 0, 0.2); z-index: 99; pointer-events: none; animation: heartbeat 1.5s infinite; }
@keyframes heartbeat { 0% { opacity: 0; } 50% { opacity: 1; } 100% { opacity: 0; } }
.game-setup-screen, .board-container { background-color: rgba(255, 255, 255, 0.98); border-radius: 24px; box-shadow: 0 12px 35px rgba(0,0,0,0.12); padding: 2rem; width: 100%; max-width: 700px; margin-bottom: 2rem; position: relative; z-index: 1; text-align: center; }
.board-container { max-width: 1200px; }
.board-square { width: 78px; height: 78px; border: 2px solid #a5b4fc; display: flex; flex-direction: column; justify-content: space-between; align-items: center; text-align: center; position: relative; border-radius: 12px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); transition: transform 0.3s ease, box-shadow 0.3s ease; padding: 4px; font-weight: bold; overflow: visible; }
.board-square:hover { transform: translateY(-4px) scale(1.05); box-shadow: 0 8px 16px rgba(0,0,0,0.2); }
.square-number { font-size: 0.8rem; color: #4B5563; align-self: flex-start; padding: 1px 4px; background-color: rgba(255,255,255,0.9); border-radius: 4px; }
.square-icon { font-size: 1.6rem; }
.square-text { font-size: 0.65rem; line-height: 1.15; color: #1F2937; }
.player-slots-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr; gap: 1px; }
.player-piece { width: 24px; height: 24px; border-radius: 50%; border: 2px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.35); display: flex; justify-content: center; align-items: center; font-size: 16px; color: white; transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55); z-index: 10; background-color: transparent !important; }
@keyframes pieceLandAnimation { 0% { transform: scale(0.8); opacity: 0.7; } 50% { transform: scale(1.4) translateY(-6px); opacity: 1; box-shadow: 0 6px 12px rgba(0,0,0,0.3); } 100% { transform: scale(1); opacity: 1; } }
.player-piece-landed { animation: pieceLandAnimation 0.7s ease-out; }
.modal, .emoji-picker-modal, .victory-overlay, .central-message-overlay, .card-selection-modal, .prank-modal, .dice-animation-overlay { display: none; position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.7); justify-content: center; align-items: center; }
.modal-content, .emoji-picker-content, .central-message-content, .card-selection-content, .prank-modal-content, .dice-animation-content { background-color: #ffffff; margin: auto; padding: 25px; border: none; width: 90%; border-radius: 18px; box-shadow: 0 10px 30px rgba(0,0,0,0.25); animation: modalAppear 0.4s ease-out; }
.modal-content { max-width: 580px; padding:35px; }
.emoji-picker-content { max-width: 340px; padding: 20px; }
.central-message-content { max-width: 600px; padding: 30px; text-align: center; }
.card-selection-content { max-width: 650px; padding: 30px; text-align: center; }
.prank-modal-content { max-width: 500px; padding: 30px; text-align: center; }
/* สไตล์สำหรับลูกเต๋า 3 มิติ */
.dice-animation-content { max-width: 350px; padding: 40px; text-align: center; background: none; color: white; border-radius: 20px; box-shadow: none; }
.scene { width: 100px; height: 100px; perspective: 600px; margin: 2rem auto; }
.cube { width: 100%; height: 100%; position: relative; transform-style: preserve-3d; transition: transform 1s; }
.cube.spinning { animation: spin-dice 2s linear infinite; }
.cube-face {
    position: absolute; width: 100px; height: 100px;
    background: rgba(255, 255, 255, 0.9);
    border: 2px solid #333;
    font-size: 4rem; color: #333; font-weight: bold;
    display: flex; justify-content: center; align-items: center;
}
.face-1 { transform: rotateY(0deg) translateZ(50px); }
.face-2 { transform: rotateY(90deg) translateZ(50px); }
.face-3 { transform: rotateY(180deg) translateZ(50px); }
.face-4 { transform: rotateY(-90deg) translateZ(50px); }
.face-5 { transform: rotateX(90deg) translateZ(50px); }
.face-6 { transform: rotateX(-90deg) translateZ(50px); }

@keyframes spin-dice {
    from { transform: rotateX(0deg) rotateY(0deg); }
    to { transform: rotateX(360deg) rotateY(720deg); }
}        @keyframes modalAppear { from { opacity: 0; transform: scale(0.85) translateY(10px); } to { opacity: 1; transform: scale(1) translateY(0); } }
.emoji-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(45px, 1fr)); gap: 12px; margin-top: 20px; }
.emoji-btn { font-size: 26px; padding: 6px; border-radius: 10px; cursor: pointer; transition: background-color 0.2s, transform 0.2s; border: 1px solid #d1d5db; }
.emoji-btn:hover { background-color: #e0f2fe; transform: scale(1.1); }
.dice-area div p { border: 1px solid #90cdf4; padding: 12px; margin: 6px 0; border-radius: 10px; background-color: #e0f2fe; box-shadow: inset 0 1px 3px rgba(0,0,0,0.05); }
.dice-value { font-size: 2rem; font-weight: bold; color: #1d4ed8; }
.dice-label { color: #1e3a8a; }
.start-square { background-color: #64748b; color: white; border-color: #475569;} .start-square .square-icon { color: #f59e0b; }
.finish-square { background-color: #f59e0b; color: #475569; border-color: #d97706;} .finish-square .square-icon { color: #b91c1c; }
.power-up-square { background-color: #22c55e; color: white; border-color: #16a34a;} .power-up-square .square-icon { color: #ecfdf5; }
.setback-square { background-color: #ef4444; color: white; border-color: #dc2626;} .setback-square .square-icon { color: #fee2e2; }
.puzzle-square { background-color: #3b82f6; color: white; border-color: #2563eb;} .puzzle-square .square-icon { color: #dbeafe; }
.bonus-square { background-color: #ec4899; color: white; border-color: #db2777;} .bonus-square .square-icon { color: #fce7f3; }
.normal-square { background-color: #e0f2fe; border-color: #7dd3fc;} .normal-square .square-icon { color: #0284c7; }
.event-square { background-color: #a855f7; color: white; border-color: #9333ea;} .event-square .square-icon { color: #f5d0fe; }
.game-board-grid { display: grid; grid-template-columns: repeat(10, 75px); grid-template-rows: repeat(5, 75px); gap: 6px; margin: 0 auto; }
.control-panel-item { background-color: rgba(255, 255, 255, 0.95); padding: 1.25rem; border-radius: 12px; box-shadow: 0 6px 12px -1px rgba(0, 0, 0, 0.08), 0 3px 7px -1px rgba(0, 0, 0, 0.05); }
.main-action-button { background: linear-gradient(to right, #fb923c, #f97316); color: white; font-weight: bold; padding: 0.85rem 1.75rem; border-radius: 0.5rem; font-size: 1.125rem; box-shadow: 0 5px 12px rgba(249, 115, 22, 0.45); transition: all 0.3s ease; border: none; }
.main-action-button:hover { transform: translateY(-3px) scale(1.03); box-shadow: 0 7px 18px rgba(249, 115, 22, 0.55); }
.main-action-button:disabled { background: #94a3b8; box-shadow: none; cursor: not-allowed; }
.modal-button { padding: 0.6rem 1.2rem; border-radius: 0.375rem; font-weight: bold; transition: background-color 0.2s ease, transform 0.2s; }
.modal-submit-button { background-color: #10b981; color: white; }
.modal-submit-button:hover { background-color: #059669; transform: translateY(-1px); }
.modal-close-button { background-color: #e5e7eb; color: #374151; }
.modal-close-button:hover { background-color: #cbd5e1; transform: translateY(-1px); }
.setup-input { border: 1px solid #60a5fa; padding: 0.5rem; border-radius: 0.375rem; margin-top: 0.25rem; width: 100%; }
.player-emoji-select-btn { font-size: 1.5rem; text-align: center; width: 60px; height: 50px; padding: 0.25rem; border: 1px solid #60a5fa; border-radius: 0.375rem; background-color: #fff; cursor: pointer; }
.player-emoji-select-btn:hover { background-color: #dbeafe; }
.player-config-entry { display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.75rem; }
.creator-credit { text-align: center; font-size: 0.875rem; color: #4b5563; margin-top: 1.5rem; }
.card-selection-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 1rem; margin-top: 1.5rem; }
.card-back { width: 100px; height: 140px; background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%); border-radius: 10px; display: flex; justify-content: center; align-items: center; font-size: 3rem; color: white; cursor: pointer; transition: transform 0.3s ease, box-shadow 0.3s ease; box-shadow: 0 4px 8px rgba(0,0,0,0.2); border: 2px solid white; }
.card-back:hover { transform: scale(1.05) translateY(-5px); box-shadow: 0 8px 16px rgba(0,0,0,0.3); }
.card-back i { text-shadow: 0 2px 4px rgba(0,0,0,0.3); }
.prank-target-btn, .prank-effect-btn, .punishment-btn, .setback-choice-btn, .bonus-choice-btn { background-color: #f0abfc; color: #701a75; padding: 0.75rem 1rem; border-radius: 8px; font-weight: bold; margin: 0.5rem; transition: background-color 0.2s, transform 0.2s; }
.punishment-btn { background-color: #fca5a5; color: #991b1b; }
.setback-choice-btn { background-color: #fca5a5; color: #991b1b; }
.bonus-choice-btn { background-color: #a5f3fc; color: #0891b2; } /* NEW: For single player bonus */
.prank-target-btn:hover, .prank-effect-btn:hover { background-color: #e879f9; transform: translateY(-2px); }
.punishment-btn:hover, .setback-choice-btn:hover { background-color: #f87171; transform: translateY(-2px); }
.bonus-choice-btn:hover { background-color: #67e8f9; transform: translateY(-2px); }
.prank-target-btn:disabled, .prank-effect-btn:disabled { background-color: #e5e7eb; color: #9ca3af; cursor: not-allowed; transform: none; }
#modalChoicesContainer { display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem; margin-bottom: 1rem; }